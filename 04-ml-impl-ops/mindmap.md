---
title: Enhanced AWS ML Module Review
markmap:
  colorFreezeLevel: 2
  initialExpandLevel: 2
  maxWidth: 300
---

# Enhanced AWS ML Module Review

- ## 1. ML Implementation & Operations
  - ### Data Ingestion & Transformation
    - **AWS Kinesis**: Collect and process streaming data in real-time.
    - **AWS Glue**: An ETL (extract, transform, load) service to prepare and integrate data from various sources (S3, RDS, etc.).
    - **Amazon EMR**: Process and analyze big data using frameworks like Apache Hadoop, Spark, and Hive.
  - ### Model Deployment Strategies
    - #### **SageMaker Hosted Endpoints** (Real-time Inference)
      - The easiest way to deploy a model for real-time, low-latency needs.
      - Creates a persistent HTTPS endpoint for on-demand predictions.
      - **How it works**: Deploys a model to a container on **ECS**, running on **EC2**. Fully managed by SageMaker.
      - **Deployment**: Use the `deploy()` method in the Python SDK.
      - **Accelerators**: Use **Elastic Inference (EI)** to attach fractional GPU acceleration.
    - #### **SageMaker Serverless Inference**
      - **Use Case**: For workloads with intermittent or unpredictable traffic and idle periods.
      - **Benefit**: Pay-per-use, automatically scales compute resources. Can tolerate cold starts.
    - #### **SageMaker Asynchronous Inference**
      - **Use Case**: Queues incoming requests; ideal for large payloads (up to 1GB), long processing times, and near real-time latency.
      - **Benefit**: Scales instance count to zero when idle to save costs.
    - #### **SageMaker Batch Transform**
      - **Use Case**: Run inference on an entire dataset at once (offline).
      - **Benefit**: No persistent endpoint needed. Manages provisioning and de-provisioning of resources.
      - Can also be used to pre-process datasets or associate input records with inference results.
    - #### **Manual Deployment Options**
      - **EC2 Instance**: Use **Deep Learning AMIs** (pre-configured with frameworks like TensorFlow, PyTorch) and select a powerful instance type (e.g., P5 with GPUs).
      - **Custom Container on ECS**: Build your own Docker container and deploy it on Elastic Container Service for full control.
  - ### Scalability & Resiliency
    - #### **High Availability & Fault Tolerance**
      - **Goal**: Avoid single points of failure. Design for failure ("Everything fails all the time").
      - **Method**: Deploy resources to multiple locations.
        - Multiple **Availability Zones (AZs)** to protect against instance/AZ failure.
        - Multiple **Regions** to protect against regional failure.
      - **Best Practice**: Use a greater number of smaller instance types instead of fewer larger ones to minimize the impact of a single instance failure.
      - **Reference**: AWS Well-Architected Framework.
    - #### **Auto Scaling Model Endpoints**
      - **How it works**: Automatically adjusts the number of instances in response to traffic.
      - **Configuration**: Define a scaling policy based on a metric, such as `SageMakerVariantInvocationsPerInstance`.
      - SageMaker automatically load balances requests across all instances.
    - #### **Multi-Model Endpoints**
      - **Use Case**: Host many models that use the same ML framework on one shared container.
      - **Benefits**:
        - **Cost-Effective**: Improves container utilization, avoiding a new endpoint for each model.
        - **Reduced Overhead**: Manage one endpoint instead of many.
  - ### Production Testing & Deployment Patterns
    - #### **A/B Testing (Production Variants)**
      - **Concept**: Test different model versions behind the same endpoint. Variants can use different algorithms, datasets, or instance types.
      - **Use Case**: Gauge the business impact (e.g., revenue, click-through) of a new model and understand the effects of model drift.
      - **Traffic Distribution Methods**:
        - **Weight-based Routing**: Assign a **weight** to each variant in the endpoint configuration (e.g., 0.2 for 20%, 0.8 for 80%).
        - **Direct Invocation**: Invoke a specific model version by specifying the `TargetVariant` in the API call.
    - #### **Blue/Green Deployment**
      - **Concept**: Maintain two identical environments (blue=old, green=new). Switch all traffic to the new environment at once for a fast rollback if needed.
    - #### **Canary Deployment**
      - **Concept**: Incrementally shift a small portion of traffic to the new model. Monitor closely and roll back if issues arise.
      - **Implementation**: Use `InitialVariantWeight` in SageMaker to manage traffic distribution.
    - #### **Shadow Deployment**
      - **Concept**: Run the new model in parallel with the old one, processing real traffic but without influencing production decisions.
      - **Use Case**: A final check to compare performance and monitor model output distribution before going live.

- ## 2. Security & Identity
  - ### Identity & Access Management (IAM)
    - **Core Pillars**:
      - **Users**: People or applications.
      - **Groups**: Collections of users under one set of permissions.
      - **Roles**: Assignable to users, applications, or services for temporary access.
    - **Policies**: JSON documents that define one or more permissions.
      - Attached to a user, group, or role.
      - Can include **conditions** to limit access (e.g., require SSL via `aws:SecureTransport`).
    - **Principle of Least Privilege**: Grant only the permissions an entity needs to perform its function.
    - **SageMaker Execution Roles**: An IAM role that grants SageMaker permission to perform operations on your behalf.
  - ### Data & Network Protection
    - #### **Amazon S3 Security**
      - **Default**: All newly created buckets are **private**.
      - **Bucket Policies**: JSON documents used to `Allow` and `Deny` access to specific IAM roles/users at the bucket level.
    - #### **Encryption**
      - **In Transit**: Use SSL/TLS (HTTPS) to protect data moving across a network.
      - **At Rest**: Protect data stored persistently.
        - **S3 Options**: SSE-S3 (S3 managed keys), SSE-KMS (KMS managed keys), SSE-C (customer keys), Client-Side.
        - **AWS KMS (Key Management Service)**
          - **Envelope Encryption**: A Customer Master Key (CMK) encrypts a Data Key, which then encrypts your actual data.
          - **Key Policies**: Control which users/roles can **administer** the key vs. which can **use** the key for encrypt/decrypt operations.
          - **Critical for SageMaker**: The Execution Role **must** have `encrypt` and `decrypt` permissions for any customer-managed KMS key it needs to use.
    - #### **Virtual Private Cloud (VPC)**
      - **Concept**: A logical, isolated data center in AWS.
      - **Subnets**:
        - **Public**: Has a route to an **Internet Gateway** for public access.
        - **Private**: No Internet Gateway; may have outbound internet via a **NAT Gateway**.
      - **VPC Endpoints (AWS PrivateLink)**: Enables **private and secure communication** between your VPC and AWS services. Traffic **never leaves the Amazon network**.
    - #### **Security Groups**
      - **Concept**: A **stateful** virtual firewall for EC2 instances.
      - **Default State**: Denies all inbound traffic. You create `allow` rules.
      - **Stateful**: If an inbound request is allowed, the outbound response is automatically allowed (and vice-versa).
      - **Rule Components**: Protocol, Port Range, and Source/Destination.
      - **Source/Destination**: Can be an IP, a network range, or another **Security Group ID**.
  - ### Anonymization Best Practices
    - **Use Case**: For sensitive data (PII) when fields cannot be removed.
    - **Example Method**: Use **Amazon Athena** to run a SQL query that creates a **hash** (e.g., SHA-256) of the original values, disguising them.

- ## 3. MLOps, Monitoring & Governance
  - ### Monitoring vs. Auditing
    - #### **Amazon CloudWatch (Infrastructure Monitoring)**
      - **Purpose**: Monitors the **performance and health** of underlying resources (EC2 instances).
      - **Metrics**: Collects near-real-time utilization metrics (CPU, Memory, GPU, Latency, Invocations).
      - **CloudWatch Alarms**: Sends notifications (via SNS/SES) when a metric breaches a threshold.
    - #### **AWS CloudTrail (API Auditing)**
      - **Purpose**: Provides a **governance and audit trail** of API calls.
      - **What it logs**: Actions like `CreateTrainingJob`, `CreateModel`, `UpdateEndpointWeights`.
      - **Long-term storage**: Create a **trail** to save logs indefinitely to an S3 bucket.
  - ### Automation & Orchestration
    - #### **CI/CD for ML (MLOps Best Practices)**
      - **Goal**: Fully automate the training and deployment cycle to prevent human error.
      - **Tools**: Use **SageMaker Pipelines** & **AWS CodePipeline**.
      - **Governance**: Version control all data, code, and build artifacts using **Git** and tags.
      - **Collaboration**: Use pull requests for peer review and knowledge sharing.
    - #### **Retraining Pipelines with AWS Step Functions**
      - **Purpose**: A serverless orchestration tool to automate and visualize the entire ML workflow.
      - **Benefits**:
        - Automatically triggers and tracks each step.
        - The output of one step becomes the input to the next.
        - Logs the state of each step, making it easier to debug failures (e.g., service quota errors).
    - #### **Custom Docker Containers & AMIs**
      - **Custom Containers**: Use when a built-in algorithm doesn't fit your needs. Build and push to **Amazon ECR**.
      - **Golden Images (AMIs)**: Ensures consistent configuration for manually managed EC2 instances.
  - ### SageMaker Model Monitor (Model Performance)
    - **Purpose**: Continuously monitor the quality and effectiveness of a deployed model, not the infrastructure.
    - **How it Works**: Compares real-time predictions against a **baseline** generated from the training data.
    - **Detects Drift In**:
      - **Data Quality**: Production data distribution changes from training data.
      - **Model Quality**: Core metrics (accuracy, precision, RMSE) degrade.
      - **Bias**: The model's predictions become biased as production data changes.
      - **Feature Attribution**: The relative importance of input features changes.
    - Integrates with CloudWatch to send alerts when violations are detected.
  - ### SageMaker Algorithm Selection
    - #### **Supervised Learning**
      - **Classification/Regression**: Linear Learner, k-NN, XGBoost, Factorization Machines.
    - #### **Time-Series Forecasting**: DeepAR.
    - #### **Unsupervised Learning**
      - **Anomaly Detection**: Random Cut Forest.
      - **Clustering**: K-Means.
      - **Topic Modeling**: LDA, NTM.
    - #### **Text Analysis**: BlazingText, Seq2Seq.
    - #### **Image & Computer Vision**: Image Classification, Object Detection, Semantic Segmentation.
  - ### Service Quotas (Limits)
    - Limits exist on services (e.g., number of specific EC2 instances).
    - Can impact SageMaker jobs (e.g., Batch Transform).
    - **Management**:
      - Request quota increases in the AWS Console.
      - Check limits with **Trusted Advisor**.

- ## 4. AWS AI/ML Service Landscape
  - ### The AWS Machine Learning Stack (3 Layers)
    - #### **Bottom Layer: Infrastructure & Frameworks**
      - **For**: ML experts wanting full control.
      - **Services**: EC2 (w/ GPUs), ECS, Deep Learning AMIs, Docker.
    - #### **Middle Layer: Amazon SageMaker**
      - **For**: Developers and data scientists wanting to streamline the ML lifecycle.
    - #### **Top Layer: AI/ML Services**
      - **For**: Customers wanting to add intelligence to apps without building/training models.
  - ### High-Level AI Service Details
    - #### **Text & Document Analysis**
      - **Textract**: Extracts text and structured data from documents using OCR.
      - **Comprehend**: Uses NLP to discover insights in text (sentiment, key phrases, topics).
    - #### **Speech & Language**
      - **Transcribe**: Speech-to-text.
      - **Translate**: Neural machine translation.
      - **Polly**: Text-to-speech.
      - **Lex**: Builds conversational chatbots.
    - #### **Vision**
      - **Rekognition**: Image and video analysis.
    - #### **Forecasting & Fraud**
      - **Forecast**: Time-series forecasting for demand planning.
      - **Fraud Detector**: Builds custom fraud detection models for online fraud prevention.